<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evercore Knowledge Graph Demo</title>
    <script src="https://unpkg.com/vis-network@9.1.9/standalone/umd/vis-network.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #0f172a;
            color: #e2e8f0;
            font-family: system-ui, -apple-system, sans-serif;
        }
        h1 {
            text-align: center;
            color: #10b981;
        }
        #graph {
            width: 100%;
            height: 600px;
            border: 2px solid #334155;
            border-radius: 12px;
            background: #1e293b;
        }
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            font-size: 14px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <h1>üåê Evercore Knowledge Graph - Live Demo</h1>
    <div id="graph"></div>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-dot" style="background: #3b82f6;"></div>
            <span>Evercore (Company)</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: #a855f7;"></div>
            <span>Related Entities</span>
        </div>
    </div>

    <script>
        // Sample graph data from Zep API (you'll see this on the actual page)
        const graphData = {
            nodes: [
                { id: "1", label: "Evercore", group: "company", size: 40 },
                { id: "2", label: "Investment Banking", group: "entity" },
                { id: "3", label: "Private Funds Group", group: "entity" },
                { id: "4", label: "New York HQ", group: "entity" },
                { id: "5", label: "$18.1B Raised", group: "entity" },
                { id: "6", label: "2,500+ Employees", group: "entity" },
                { id: "7", label: "M&A Advisory", group: "entity" },
                { id: "8", label: "Placement Agent", group: "entity" },
                { id: "9", label: "Sovereign Wealth Funds", group: "entity" },
                { id: "10", label: "Pension Funds", group: "entity" },
                { id: "11", label: "Family Offices", group: "entity" },
                { id: "12", label: "Campbell Lutyens", group: "entity" },
                { id: "13", label: "Eaton Partners", group: "entity" },
                { id: "14", label: "First Avenue", group: "entity" }
            ],
            edges: [
                { from: "1", to: "2", label: "Specializes In" },
                { from: "1", to: "3", label: "Has Division" },
                { from: "1", to: "4", label: "Headquartered" },
                { from: "1", to: "5", label: "Secured" },
                { from: "1", to: "6", label: "Employs" },
                { from: "1", to: "7", label: "Provides" },
                { from: "1", to: "8", label: "Acts As" },
                { from: "8", to: "9", label: "Connects To" },
                { from: "8", to: "10", label: "Connects To" },
                { from: "8", to: "11", label: "Connects To" },
                { from: "1", to: "12", label: "Competitor" },
                { from: "1", to: "13", label: "Competitor" },
                { from: "1", to: "14", label: "Competitor" }
            ]
        };

        // Create vis-network visualization
        const container = document.getElementById('graph');

        const nodes = new vis.DataSet(graphData.nodes.map(node => ({
            id: node.id,
            label: node.label,
            group: node.group || 'default',
            shape: 'dot',
            size: node.size || 20,
            font: {
                color: '#e2e8f0',
                size: 14,
                face: 'system-ui'
            }
        })));

        const edges = new vis.DataSet(graphData.edges.map(edge => ({
            from: edge.from,
            to: edge.to,
            label: edge.label || '',
            arrows: 'to',
            font: {
                color: '#94a3b8',
                size: 11,
                align: 'middle'
            },
            color: {
                color: '#475569',
                highlight: '#3b82f6'
            }
        })));

        const data = { nodes, edges };

        const options = {
            nodes: {
                borderWidth: 2,
                borderWidthSelected: 4,
                color: {
                    border: '#334155',
                    background: '#1e293b',
                    highlight: {
                        border: '#3b82f6',
                        background: '#1e3a8a'
                    }
                }
            },
            edges: {
                width: 2,
                smooth: {
                    type: 'continuous'
                }
            },
            physics: {
                stabilization: {
                    iterations: 200
                },
                barnesHut: {
                    gravitationalConstant: -2000,
                    centralGravity: 0.3,
                    springLength: 150,
                    springConstant: 0.04
                }
            },
            interaction: {
                hover: true,
                tooltipDelay: 100,
                navigationButtons: true,
                keyboard: true
            },
            groups: {
                company: {
                    color: { background: '#3b82f6', border: '#1e40af' }
                },
                entity: {
                    color: { background: '#a855f7', border: '#7e22ce' }
                }
            }
        };

        const network = new vis.Network(container, data, options);

        // Add click handler
        network.on('click', (params) => {
            if (params.nodes.length > 0) {
                const nodeId = params.nodes[0];
                const node = nodes.get(nodeId);
                console.log('Clicked node:', node);
            }
        });

        console.log('‚úÖ Knowledge graph loaded with', graphData.nodes.length, 'nodes and', graphData.edges.length, 'edges');
    </script>
</body>
</html>
